<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Campaign Details - JISOR</title>
    <link rel="stylesheet" href="css/v1/styles.css" data-version-file="styles.css">
    <style>
        /* Version Switcher Styles */
        .version-switcher {
            position: fixed;
            top: 50px;
            right: 20px;
            z-index: 9999;
            background: white;
            border-radius: 30px;
            padding: 6px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            display: flex;
            gap: 8px;
        }

        .version-btn {
            padding: 8px 16px;
            border: none;
            background: transparent;
            border-radius: 24px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #6B7280;
        }

        .version-btn.active {
            background: linear-gradient(135deg, #6366F1, #8B5CF6);
            color: white;
            box-shadow: 0 2px 8px rgba(99,102,241,0.3);
        }

        .version-btn:hover:not(.active) {
            background: #F3F4F6;
        }
    </style>
    <style>
        /* Campaign Hero Section */
        .campaign-hero {
            background: white;
            padding: 24px 20px;
            margin-bottom: 12px;
        }

        .campaign-badge-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }

        .campaign-type-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            background: var(--primary-bg);
            border-radius: var(--radius-full);
            font-size: 12px;
            font-weight: 600;
            color: var(--primary);
        }

        .campaign-type-badge svg {
            width: 14px;
            height: 14px;
        }

        .campaign-status {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            border-radius: var(--radius-full);
            font-size: 12px;
            font-weight: 600;
        }

        .campaign-status.active {
            background: var(--success-bg);
            color: var(--success);
        }

        .status-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: currentColor;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .campaign-name {
            font-size: 24px;
            font-weight: 800;
            color: var(--gray-900);
            margin-bottom: 6px;
            line-height: 1.2;
            letter-spacing: -0.5px;
        }

        .campaign-id {
            font-size: 13px;
            color: var(--gray-400);
            font-weight: 600;
            margin-bottom: 20px;
            letter-spacing: 0.3px;
        }

        .campaign-dates {
            display: flex;
            gap: 24px;
        }

        .date-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .date-icon {
            width: 36px;
            height: 36px;
            border-radius: var(--radius-md);
            background: var(--gray-50);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .date-icon svg {
            width: 18px;
            height: 18px;
            color: var(--gray-500);
        }

        .date-icon.warning {
            background: var(--warning-bg);
        }

        .date-icon.warning svg {
            color: var(--warning);
        }

        .date-content {
            display: flex;
            flex-direction: column;
        }

        .date-label {
            font-size: 11px;
            color: var(--gray-400);
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .date-value {
            font-size: 14px;
            font-weight: 600;
            color: var(--gray-800);
        }

        .date-value.urgent {
            color: var(--warning);
        }

        /* Overview Cards */
        .overview-card {
            background: white;
            padding: 24px 20px;
            margin-bottom: 12px;
        }

        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .card-title {
            font-size: 17px;
            font-weight: 800;
            color: var(--gray-900);
            letter-spacing: -0.3px;
        }

        .view-all-link {
            font-size: 13px;
            font-weight: 600;
            color: var(--primary);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 4px;
            cursor: pointer;
        }

        .view-all-link svg {
            width: 16px;
            height: 16px;
        }

        /* Applicants Preview */
        .applicants-preview {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 24px;
        }

        .avatar-stack {
            display: flex;
            align-items: center;
        }

        .avatar {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            border: 3px solid white;
            margin-left: -12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 700;
            color: white;
            position: relative;
            box-shadow: var(--shadow-sm);
        }

        .avatar:first-child {
            margin-left: 0;
        }

        .avatar.more {
            background: var(--gray-800);
            font-size: 12px;
        }

        .total-applicants {
            text-align: right;
        }

        .total-number {
            font-size: 32px;
            font-weight: 900;
            color: var(--gray-900);
            line-height: 1;
            letter-spacing: -1px;
        }

        .total-label {
            font-size: 12px;
            color: var(--gray-500);
            font-weight: 600;
            margin-top: 4px;
        }

        /* Stats Row */
        .stats-row {
            display: flex;
            gap: 8px;
        }

        .stat-chip {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 8px 14px;
            border-radius: var(--radius-full);
            font-size: 13px;
            font-weight: 600;
            flex: 1;
            justify-content: center;
        }

        .stat-chip.accepted {
            background: var(--success-bg);
            color: var(--success);
        }

        .stat-chip.pending {
            background: var(--warning-bg);
            color: var(--warning);
        }

        .stat-chip.rejected {
            background: var(--error-bg);
            color: var(--error);
        }

        .stat-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: currentColor;
        }

        /* Pool Progress Card */
        .pool-card {
            background: white;
            padding: 24px 20px;
            margin-bottom: 12px;
        }

        .pool-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }

        .pool-title {
            font-size: 17px;
            font-weight: 800;
            color: var(--gray-900);
            letter-spacing: -0.3px;
        }

        .pool-count {
            font-size: 14px;
            font-weight: 800;
            color: var(--primary);
            letter-spacing: -0.2px;
        }

        .pool-count span {
            color: var(--gray-400);
            font-weight: 600;
        }

        .progress-bar-container {
            height: 12px;
            background: var(--gray-100);
            border-radius: var(--radius-full);
            overflow: hidden;
            margin-bottom: 12px;
        }

        .progress-bar {
            height: 100%;
            background: var(--gradient-primary);
            border-radius: var(--radius-full);
            transition: width 0.5s ease;
            position: relative;
        }

        .progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.3) 50%, transparent 100%);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .pool-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .pool-percentage {
            font-size: 28px;
            font-weight: 900;
            color: var(--primary);
            letter-spacing: -1px;
        }

        .pool-message {
            font-size: 13px;
            color: var(--gray-500);
            font-weight: 600;
        }

        .pool-message strong {
            color: var(--gray-800);
            font-weight: 800;
        }

        /* Budget Card */
        .budget-card {
            background: white;
            padding: 24px 20px;
            margin-bottom: 12px;
        }

        .budget-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .budget-title {
            font-size: 17px;
            font-weight: 800;
            color: var(--gray-900);
            letter-spacing: -0.3px;
        }

        .budget-total {
            font-size: 12px;
            font-weight: 600;
            color: var(--gray-500);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .budget-total strong {
            font-size: 18px;
            color: var(--gray-900);
            font-weight: 900;
            text-transform: none;
            letter-spacing: -0.5px;
        }

        .budget-breakdown {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .budget-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 14px 16px;
            background: var(--gray-50);
            border-radius: var(--radius-lg);
            transition: all 0.2s ease;
        }

        .budget-item:hover {
            background: var(--gray-100);
        }

        .budget-item-left {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .budget-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }

        .budget-dot.committed { background: var(--primary); }
        .budget-dot.pending { background: var(--warning); }
        .budget-dot.available { background: var(--success); }

        .budget-item-label {
            font-size: 14px;
            font-weight: 600;
            color: var(--gray-700);
        }

        .budget-item-value {
            font-size: 16px;
            font-weight: 800;
            color: var(--gray-900);
            letter-spacing: -0.3px;
        }

        /* Main Tabs Navigation */
        .main-tabs-container {
            background: white;
            padding: 0 20px;
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 2px solid var(--gray-100);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
        }

        .main-tabs {
            display: flex;
            gap: 0;
        }

        .main-tab {
            flex: 1;
            padding: 18px 16px;
            font-size: 14px;
            font-weight: 700;
            color: var(--gray-500);
            background: none;
            border: none;
            cursor: pointer;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s ease;
        }

        .main-tab:hover {
            color: var(--gray-700);
            background: var(--gray-50);
        }

        .main-tab.active {
            color: var(--primary);
        }

        .main-tab.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--gradient-primary);
            border-radius: 3px 3px 0 0;
        }

        .tab-badge {
            min-width: 20px;
            height: 20px;
            padding: 0 6px;
            border-radius: var(--radius-full);
            font-size: 11px;
            font-weight: 800;
            background: var(--gray-200);
            color: var(--gray-600);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .main-tab.active .tab-badge {
            background: var(--primary);
            color: white;
        }

        /* Tab Content Sections */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Filter Section - Applications & Pool */
        .filter-section {
            background: white;
            padding: 16px 20px;
            border-bottom: 1px solid var(--gray-100);
        }

        .filter-chips, .filter-tabs {
            display: flex;
            gap: 8px;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        .filter-chips::-webkit-scrollbar,
        .filter-tabs::-webkit-scrollbar {
            display: none;
        }

        .filter-chip {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 10px 16px;
            border-radius: var(--radius-full);
            font-size: 13px;
            font-weight: 700;
            background: var(--gray-100);
            color: var(--gray-600);
            border: none;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.2s ease;
        }

        .filter-chip:hover {
            background: var(--gray-200);
            transform: translateY(-1px);
        }

        .filter-chip.active {
            background: var(--primary);
            color: white;
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
        }

        /* Application Cards */
        .applications-container, .pool-container-content {
            padding: 20px;
        }

        .application-card {
            background: white;
            border-radius: var(--radius-lg);
            padding: 18px;
            margin-bottom: 14px;
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--gray-100);
            transition: all 0.3s ease;
        }

        .application-card:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
            border-color: var(--gray-200);
        }

        .card-header-row {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .influencer-info {
            display: flex;
            align-items: center;
            gap: 12px;
            flex: 1;
        }

        .influencer-avatar-large {
            width: 52px;
            height: 52px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: 700;
            color: white;
            flex-shrink: 0;
        }

        .influencer-details {
            flex: 1;
            min-width: 0;
        }

        .influencer-name-row {
            display: flex;
            align-items: center;
            gap: 6px;
            margin-bottom: 4px;
        }

        .influencer-name {
            font-size: 16px;
            font-weight: 700;
            color: var(--gray-900);
        }

        .verified-badge {
            width: 18px;
            height: 18px;
            flex-shrink: 0;
        }

        .influencer-stats {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            color: var(--gray-500);
        }

        .stat-separator {
            width: 3px;
            height: 3px;
            border-radius: 50%;
            background: var(--gray-300);
        }

        .rating-display {
            display: flex;
            align-items: center;
            gap: 4px;
            color: var(--warning);
        }

        .rating-display svg {
            width: 14px;
            height: 14px;
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            border-radius: var(--radius-full);
            font-size: 12px;
            font-weight: 600;
            white-space: nowrap;
        }

        .status-badge.pending {
            background: var(--warning-bg);
            color: var(--warning);
        }

        .status-badge.rejected {
            background: var(--error-bg);
            color: var(--error);
        }

        .status-badge.awaiting-signature {
            background: var(--warning-bg);
            color: var(--warning);
        }

        .status-badge.expired {
            background: var(--error-bg);
            color: var(--error);
        }

        .status-badge.contract-signed {
            background: var(--info-bg);
            color: var(--info);
        }

        .status-badge.paid {
            background: var(--success-bg);
            color: var(--success);
        }

        .status-badge.content-submitted {
            background: var(--purple-bg);
            color: var(--purple);
        }

        .status-badge.approved {
            background: var(--success-bg);
            color: var(--success);
        }

        .status-dot-small {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: currentColor;
        }

        .niche-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin-bottom: 12px;
        }

        .niche-tag {
            padding: 4px 10px;
            background: var(--gray-100);
            border-radius: var(--radius-full);
            font-size: 11px;
            font-weight: 600;
            color: var(--gray-600);
        }

        .price-section {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 0;
            border-top: 1px solid var(--gray-100);
            border-bottom: 1px solid var(--gray-100);
            margin-bottom: 12px;
        }

        .price-info {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .price-label {
            font-size: 11px;
            color: var(--gray-500);
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .price-value-row {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .price-current {
            font-size: 18px;
            font-weight: 800;
            color: var(--gray-900);
        }

        .price-history {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 4px 8px;
            background: var(--success-bg);
            border-radius: var(--radius-sm);
            font-size: 11px;
            color: var(--success);
            font-weight: 600;
        }

        .price-history svg {
            width: 12px;
            height: 12px;
        }

        .price-old {
            text-decoration: line-through;
            color: var(--gray-400);
        }

        .platform-icons {
            display: flex;
            gap: 6px;
        }

        .platform-icon {
            width: 32px;
            height: 32px;
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .platform-icon svg {
            width: 16px;
            height: 16px;
        }

        .platform-icon.instagram {
            background: var(--instagram-bg);
            color: var(--instagram);
        }

        .platform-icon.tiktok {
            background: var(--tiktok-bg);
            color: var(--tiktok);
        }

        .applied-time {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
            color: var(--gray-400);
            margin-bottom: 12px;
        }

        .applied-time svg {
            width: 16px;
            height: 16px;
        }

        .action-buttons {
            display: flex;
            gap: 8px;
        }

        .action-btn {
            flex: 1;
            padding: 10px 12px;
            border-radius: var(--radius-md);
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            border: none;
            transition: all 0.2s ease;
        }

        .action-btn svg {
            width: 16px;
            height: 16px;
        }

        .action-btn.secondary {
            background: var(--gray-100);
            color: var(--gray-700);
            border: 1px solid var(--gray-200);
        }

        .action-btn.secondary:hover {
            background: var(--gray-200);
        }

        .action-btn.primary {
            background: var(--gradient-primary);
            color: white;
        }

        .action-btn.primary:hover {
            opacity: 0.9;
        }

        .action-btn.danger {
            background: var(--error-bg);
            color: var(--error);
            border: 1px solid var(--error);
        }

        .action-btn.danger:hover {
            background: var(--error);
            color: white;
        }

        .action-btn.success {
            background: var(--success-bg);
            color: var(--success);
        }

        .action-btn.success:hover {
            background: var(--success);
            color: white;
        }

        .action-btn.warning {
            background: var(--warning-bg);
            color: var(--warning);
        }

        .action-btn.warning:hover {
            background: var(--warning);
            color: white;
        }

        /* Pool Specific Styles */
        .pool-summary {
            background: white;
            padding: 20px;
            border-bottom: 1px solid var(--gray-100);
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 20px 20px 12px;
        }

        .section-icon {
            width: 24px;
            height: 24px;
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .section-icon svg {
            width: 14px;
            height: 14px;
        }

        .section-icon.warning { background: var(--warning-bg); color: var(--warning); }
        .section-icon.error { background: var(--error-bg); color: var(--error); }
        .section-icon.info { background: var(--info-bg); color: var(--info); }
        .section-icon.success { background: var(--success-bg); color: var(--success); }
        .section-icon.purple { background: var(--purple-bg); color: var(--purple); }

        .section-title {
            font-size: 14px;
            font-weight: 800;
            color: var(--gray-800);
            letter-spacing: -0.2px;
        }

        .section-count {
            font-size: 13px;
            font-weight: 700;
            color: var(--gray-400);
        }

        .influencer-list {
            padding: 0 20px 16px;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .influencer-card {
            background: white;
            border-radius: var(--radius-lg);
            padding: 18px;
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--gray-100);
            transition: all 0.3s ease;
        }

        .influencer-card:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
            border-color: var(--gray-200);
        }

        .influencer-card.expired {
            background: linear-gradient(135deg, #FFF5F5 0%, #FEE2E2 100%);
            border: 2px solid var(--error);
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.15);
        }

        .card-main {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            margin-bottom: 12px;
        }

        .influencer-avatar {
            width: 52px;
            height: 52px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: 700;
            color: white;
            flex-shrink: 0;
        }

        .card-content {
            flex: 1;
            min-width: 0;
        }

        .card-top-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 6px;
        }

        .card-influencer-name {
            font-size: 16px;
            font-weight: 700;
            color: var(--gray-900);
        }

        .card-price {
            font-size: 15px;
            font-weight: 700;
            color: var(--gray-900);
        }

        .card-middle-row {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
        }

        .card-stats {
            font-size: 13px;
            color: var(--gray-500);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .platform-icons-small {
            display: flex;
            gap: 6px;
        }

        .platform-dot {
            width: 28px;
            height: 28px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .platform-dot svg {
            width: 14px;
            height: 14px;
        }

        .platform-dot.instagram {
            background: var(--instagram-bg);
            color: var(--instagram);
        }

        .platform-dot.tiktok {
            background: var(--tiktok-bg);
            color: var(--tiktok);
        }

        .status-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .time-left {
            font-size: 12px;
            color: var(--gray-500);
            display: flex;
            align-items: center;
            gap: 6px;
            font-weight: 500;
        }

        .time-left.urgent {
            color: var(--error);
            font-weight: 700;
        }

        .time-left svg {
            width: 14px;
            height: 14px;
        }

        .payment-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 12px;
            padding: 10px 12px;
            background: var(--gray-50);
            border-radius: var(--radius-md);
        }

        .payment-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .payment-icon svg {
            width: 14px;
            height: 14px;
        }

        .payment-icon.paid {
            background: var(--success-bg);
            color: var(--success);
        }

        .payment-icon.unpaid {
            background: var(--gray-200);
            color: var(--gray-500);
        }

        .payment-text {
            font-size: 12px;
            font-weight: 600;
            flex: 1;
        }

        .payment-text.paid {
            color: var(--success);
        }

        .payment-text.unpaid {
            color: var(--gray-600);
        }

        .card-actions {
            display: flex;
            gap: 8px;
            margin-top: 14px;
        }

        .replace-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 12px;
            background: var(--error-bg);
            border: 2px dashed var(--error);
            border-radius: var(--radius-md);
            color: var(--error);
            font-size: 13px;
            font-weight: 700;
            cursor: pointer;
            margin-top: 12px;
            transition: all 0.2s ease;
        }

        .replace-btn:hover {
            background: var(--error);
            color: white;
            border-style: solid;
        }

        .replace-btn svg {
            width: 16px;
            height: 16px;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 80px 20px;
        }

        .empty-icon {
            width: 96px;
            height: 96px;
            margin: 0 auto 24px;
            background: linear-gradient(135deg, var(--gray-100) 0%, var(--gray-50) 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow-sm);
        }

        .empty-icon svg {
            width: 48px;
            height: 48px;
            color: var(--gray-400);
        }

        .empty-title {
            font-size: 20px;
            font-weight: 800;
            color: var(--gray-900);
            margin-bottom: 12px;
            letter-spacing: -0.5px;
        }

        .empty-message {
            font-size: 15px;
            color: var(--gray-500);
            line-height: 1.6;
            font-weight: 500;
        }

        /* Bottom Safe Area */
        .bottom-safe-area {
            height: 34px;
        }
    </style>
</head>
<body>
    <!-- Version Switcher -->
    <div class="version-switcher">
        <button class="version-btn active" data-switch-version="hybrid">Hybrid</button>
        <button class="version-btn" data-switch-version="invite">Invite</button>
        <button class="version-btn" data-switch-version="public">Public</button>
    </div>

    <div class="mobile-container">
        <!-- Status Bar -->
        <div class="status-bar">
            <span class="time" id="current-time">9:41</span>
            <div class="icons">
                <svg width="18" height="12" viewBox="0 0 18 12" fill="none">
                    <path d="M1 4.5C1 3.11929 2.11929 2 3.5 2H4.5C5.88071 2 7 3.11929 7 4.5V10.5C7 10.7761 6.77614 11 6.5 11H2C1.17157 11 0.5 10.3284 0.5 9.5V5C0.5 4.72386 0.723858 4.5 1 4.5Z" fill="#1F2937"/>
                    <path d="M8 3.5C8 2.67157 8.67157 2 9.5 2H10.5C11.3284 2 12 2.67157 12 3.5V10.5C12 10.7761 11.7761 11 11.5 11H8.5C8.22386 11 8 10.7761 8 10.5V3.5Z" fill="#1F2937"/>
                    <path d="M13 1.5C13 0.671573 13.6716 0 14.5 0H15.5C16.3284 0 17 0.671573 17 1.5V10.5C17 10.7761 16.7761 11 16.5 11H13.5C13.2239 11 13 10.7761 13 10.5V1.5Z" fill="#1F2937"/>
                </svg>
                <svg width="16" height="12" viewBox="0 0 16 12" fill="none">
                    <path d="M8 2.5C10.5 2.5 12.7 3.6 14.2 5.4C14.4 5.7 14.4 6.1 14.1 6.4L8.4 11.6C8.2 11.8 7.8 11.8 7.6 11.6L1.9 6.4C1.6 6.1 1.6 5.7 1.8 5.4C3.3 3.6 5.5 2.5 8 2.5Z" fill="#1F2937"/>
                </svg>
                <svg width="25" height="12" viewBox="0 0 25 12" fill="none">
                    <rect x="0.5" y="0.5" width="21" height="11" rx="2.5" stroke="#1F2937"/>
                    <rect x="2" y="2" width="18" height="8" rx="1" fill="#1F2937"/>
                    <path d="M23 4V8C23.8 7.6 24.5 6.9 24.5 6C24.5 5.1 23.8 4.4 23 4Z" fill="#1F2937"/>
                </svg>
            </div>
        </div>

        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <button class="back-btn" onclick="window.location.href='my-campaigns.html'">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M15 18l-6-6 6-6"/>
                    </svg>
                </button>
                <h1 class="header-title">Campaign Details</h1>
            </div>
            <div class="header-actions">
                <button class="icon-btn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="1"/>
                        <circle cx="19" cy="12" r="1"/>
                        <circle cx="5" cy="12" r="1"/>
                    </svg>
                </button>
            </div>
        </header>

        <!-- Main Tabs Navigation -->
        <div class="main-tabs-container">
            <div class="main-tabs">
                <button class="main-tab active" data-tab="overview" onclick="switchTab('overview')">
                    Overview
                </button>
                <button class="main-tab" data-tab="applications" onclick="switchTab('applications')">
                    Applications
                    <span class="tab-badge" id="applications-badge">0</span>
                </button>
                <button class="main-tab" data-tab="pool" onclick="switchTab('pool')">
                    Accepted Pool
                    <span class="tab-badge" id="pool-badge">0</span>
                </button>
            </div>
        </div>

        <!-- Overview Tab Content -->
        <div id="overview-tab" class="tab-content active">
            <!-- Campaign Hero Section -->
            <section class="campaign-hero fade-in">
                <div class="campaign-badge-row">
                    <div class="campaign-type-badge">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                            <circle cx="9" cy="7" r="4"/>
                            <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                            <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                        </svg>
                        Mass Campaign
                    </div>
                    <div class="campaign-status active">
                        <span class="status-dot"></span>
                        Active
                    </div>
                </div>

                <h2 class="campaign-name" id="campaign-name">Ramadan Food Products Campaign</h2>
                <p class="campaign-id" id="campaign-id">#MASS-2025-00089</p>

                <div class="campaign-dates">
                    <div class="date-item">
                        <div class="date-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                                <line x1="16" y1="2" x2="16" y2="6"/>
                                <line x1="8" y1="2" x2="8" y2="6"/>
                                <line x1="3" y1="10" x2="21" y2="10"/>
                            </svg>
                        </div>
                        <div class="date-content">
                            <span class="date-label">Publish Date</span>
                            <span class="date-value" id="publish-date">1 Ramadan 1446</span>
                        </div>
                    </div>

                    <div class="date-item">
                        <div class="date-icon warning">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="10"/>
                                <polyline points="12 6 12 12 16 14"/>
                            </svg>
                        </div>
                        <div class="date-content">
                            <span class="date-label">Closes In</span>
                            <span class="date-value urgent" id="days-left">3 days left</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Applications Overview Card -->
            <section class="overview-card fade-in delay-1">
                <div class="card-header">
                    <h3 class="card-title">Influencer Applications</h3>
                    <a class="view-all-link" onclick="switchTab('applications')">
                        View All
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M9 18l6-6-6-6"/>
                        </svg>
                    </a>
                </div>

                <div class="applicants-preview">
                    <div class="avatar-stack" id="avatar-stack">
                        <!-- Avatars will be inserted here -->
                    </div>
                    <div class="total-applicants">
                        <div class="total-number" id="total-applicants">0</div>
                        <div class="total-label">Total Applicants</div>
                    </div>
                </div>

                <div class="stats-row">
                    <div class="stat-chip accepted">
                        <span class="stat-dot"></span>
                        <span id="accepted-count">0</span> Accepted
                    </div>
                    <div class="stat-chip pending">
                        <span class="stat-dot"></span>
                        <span id="pending-count">0</span> Pending
                    </div>
                    <div class="stat-chip rejected">
                        <span class="stat-dot"></span>
                        <span id="rejected-count">0</span> Rejected
                    </div>
                </div>
            </section>

            <!-- Pool Progress Card -->
            <section class="pool-card fade-in delay-2">
                <div class="pool-header">
                    <h3 class="pool-title">Pool Completion</h3>
                    <div class="pool-count"><span id="pool-current">0</span> <span>/ <span id="pool-required">25</span> required</span></div>
                </div>

                <div class="progress-bar-container">
                    <div class="progress-bar" id="progress-bar" style="width: 0%"></div>
                </div>

                <div class="pool-info">
                    <div class="pool-percentage" id="pool-percentage">0%</div>
                    <div class="pool-message">Need <strong id="pool-needed">25 more</strong> influencers</div>
                </div>
            </section>

            <!-- Budget Card -->
            <section class="budget-card fade-in delay-3">
                <div class="budget-header">
                    <h3 class="budget-title">Budget Summary</h3>
                    <div class="budget-total">Total: <strong id="budget-total">125,000 SAR</strong></div>
                </div>

                <div class="budget-breakdown">
                    <div class="budget-item">
                        <div class="budget-item-left">
                            <span class="budget-dot committed"></span>
                            <span class="budget-item-label">Committed</span>
                        </div>
                        <span class="budget-item-value" id="budget-committed">0 SAR</span>
                    </div>
                    <div class="budget-item">
                        <div class="budget-item-left">
                            <span class="budget-dot pending"></span>
                            <span class="budget-item-label">Pending Offers</span>
                        </div>
                        <span class="budget-item-value" id="budget-pending">0 SAR</span>
                    </div>
                    <div class="budget-item">
                        <div class="budget-item-left">
                            <span class="budget-dot available"></span>
                            <span class="budget-item-label">Available</span>
                        </div>
                        <span class="budget-item-value" id="budget-available">0 SAR</span>
                    </div>
                </div>
            </section>
        </div>

        <!-- Applications Tab Content -->
        <div id="applications-tab" class="tab-content">
            <!-- Filter Section -->
            <section class="filter-section">
                <div class="filter-chips">
                    <button class="filter-chip active" data-filter="all" onclick="filterApplications('all')">
                        All (<span id="count-all">0</span>)
                    </button>
                    <button class="filter-chip" data-filter="pending" onclick="filterApplications('pending')">
                        ‚è≥ Pending (<span id="count-pending">0</span>)
                    </button>
                    <button class="filter-chip" data-filter="rejected" onclick="filterApplications('rejected')">
                        ‚ùå Rejected (<span id="count-rejected">0</span>)
                    </button>
                </div>
            </section>

            <!-- Applications Container -->
            <div class="applications-container" id="applications-container">
                <!-- Applications will be inserted here -->
            </div>
        </div>

        <!-- Accepted Pool Tab Content -->
        <div id="pool-tab" class="tab-content">
            <!-- Pool Progress -->
            <div class="pool-summary">
                <div class="pool-header">
                    <span class="pool-title">Pool Progress</span>
                    <span class="pool-count"><span id="pool-current-2">0</span> <span>/ <span id="pool-required-2">25</span> required</span></span>
                </div>
                <div class="progress-bar-container">
                    <div class="progress-bar" id="progress-bar-2"></div>
                </div>
            </div>

            <!-- Filter Chips -->
            <div class="filter-section">
                <div class="filter-tabs">
                    <button class="filter-chip active" data-filter="all" onclick="filterPool('all')">
                        All (<span id="count-pool-all">0</span>)
                    </button>
                    <button class="filter-chip" data-filter="awaiting-signature" onclick="filterPool('awaiting-signature')">
                        ‚è≥ Awaiting (<span id="count-awaiting">0</span>)
                    </button>
                    <button class="filter-chip" data-filter="contract-signed" onclick="filterPool('contract-signed')">
                        üìù Signed (<span id="count-signed">0</span>)
                    </button>
                    <button class="filter-chip" data-filter="paid" onclick="filterPool('paid')">
                        üí∞ Paid (<span id="count-paid">0</span>)
                    </button>
                    <button class="filter-chip" data-filter="content-submitted" onclick="filterPool('content-submitted')">
                        üì§ Content (<span id="count-content">0</span>)
                    </button>
                    <button class="filter-chip" data-filter="approved" onclick="filterPool('approved')">
                        ‚úÖ Done (<span id="count-done">0</span>)
                    </button>
                </div>
            </div>

            <!-- Pool Container -->
            <div class="pool-container-content" id="pool-container">
                <!-- Pool groups will be inserted here -->
            </div>
        </div>

        <!-- Bottom Safe Area -->
        <div class="bottom-safe-area"></div>
    </div>

    <script src="js/app.js"></script>
    <script>
        // Global state
        let currentFilter = 'all';
        let currentPoolFilter = 'all';

        // Tab switching function - Define FIRST
        function switchTab(tabName) {
            console.log('üîÑ Switching to tab:', tabName);

            // Update tab buttons
            const tabs = document.querySelectorAll('.main-tab');
            tabs.forEach(tab => {
                if (tab.dataset.tab === tabName) {
                    tab.classList.add('active');
                } else {
                    tab.classList.remove('active');
                }
            });

            // Update tab content
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach(content => {
                if (content.id === tabName + '-tab') {
                    content.classList.add('active');
                    console.log('‚úÖ Showing:', content.id);
                } else {
                    content.classList.remove('active');
                }
            });
        }

        // Make switchTab available globally
        window.switchTab = switchTab;

        // Handle URL hash navigation
        function handleHashNavigation() {
            const hash = window.location.hash.substring(1); // Remove #
            if (hash && (hash === 'overview' || hash === 'applications' || hash === 'pool')) {
                switchTab(hash);
            }
        }

        // Handle hash changes
        window.addEventListener('hashchange', handleHashNavigation);

        // Check hash on load
        window.addEventListener('DOMContentLoaded', handleHashNavigation);

        // Update time
        function updateTime() {
            const now = new Date();
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const timeEl = document.getElementById('current-time');
            if (timeEl) {
                timeEl.textContent = `${hours}:${minutes}`;
            }
        }

        // Start time updates
        updateTime();
        setInterval(updateTime, 60000);

        // ==================== OVERVIEW TAB ====================
        function loadOverview(data) {
            const campaign = data.campaign;
            const applications = data.applications;
            const acceptedPool = data.acceptedPool;

            // Update campaign info
            document.getElementById('campaign-name').textContent = campaign.name;
            document.getElementById('campaign-id').textContent = '#' + campaign.id;
            document.getElementById('publish-date').textContent = campaign.publishDate;
            document.getElementById('days-left').textContent = campaign.daysLeft + ' days left';

            // Count stats
            const pendingCount = applications.filter(a => a.status === 'pending').length;
            const rejectedCount = applications.filter(a => a.status === 'rejected').length;
            const acceptedCount = acceptedPool.length;

            document.getElementById('total-applicants').textContent = applications.length;
            document.getElementById('accepted-count').textContent = acceptedCount;
            document.getElementById('pending-count').textContent = pendingCount;
            document.getElementById('rejected-count').textContent = rejectedCount;

            // Avatar stack
            const avatarStack = document.getElementById('avatar-stack');
            avatarStack.innerHTML = '';
            const sampleApplicants = applications.slice(0, 3);
            sampleApplicants.forEach(app => {
                const avatar = document.createElement('div');
                avatar.className = 'avatar';
                avatar.style.background = app.gradient;
                avatar.textContent = app.avatar;
                avatarStack.appendChild(avatar);
            });
            if (applications.length > 3) {
                const moreAvatar = document.createElement('div');
                moreAvatar.className = 'avatar more';
                moreAvatar.textContent = '+' + (applications.length - 3);
                avatarStack.appendChild(moreAvatar);
            }

            // Pool progress
            const poolCurrent = acceptedCount;
            const poolRequired = campaign.requiredInfluencers;
            const poolPercentage = Math.round((poolCurrent / poolRequired) * 100);
            const poolNeeded = poolRequired - poolCurrent;

            document.getElementById('pool-current').textContent = poolCurrent;
            document.getElementById('pool-required').textContent = poolRequired;
            document.getElementById('pool-percentage').textContent = poolPercentage + '%';
            document.getElementById('pool-needed').textContent = poolNeeded + ' more';
            document.getElementById('progress-bar').style.width = poolPercentage + '%';

            // Budget
            document.getElementById('budget-total').textContent = campaign.totalBudget.toLocaleString() + ' SAR';
            document.getElementById('budget-committed').textContent = campaign.budgetCommitted.toLocaleString() + ' SAR';
            document.getElementById('budget-pending').textContent = campaign.budgetPending.toLocaleString() + ' SAR';
            document.getElementById('budget-available').textContent = campaign.budgetAvailable.toLocaleString() + ' SAR';

            // Update badges
            document.getElementById('applications-badge').textContent = applications.length;
            document.getElementById('pool-badge').textContent = acceptedCount;
        }

        // ==================== APPLICATIONS TAB ====================
        function loadApplicationsTab(data) {
            const applications = data.applications;

            // Update counts
            const allCount = applications.length;
            const pendingCount = applications.filter(a => a.status === 'pending').length;
            const rejectedCount = applications.filter(a => a.status === 'rejected').length;

            document.getElementById('count-all').textContent = allCount;
            document.getElementById('count-pending').textContent = pendingCount;
            document.getElementById('count-rejected').textContent = rejectedCount;

            // Render applications
            renderApplications(applications);
        }

        function renderApplications(applications) {
            const container = document.getElementById('applications-container');
            const filtered = currentFilter === 'all'
                ? applications
                : applications.filter(a => a.status === currentFilter);

            if (filtered.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                                <circle cx="12" cy="7" r="4"/>
                            </svg>
                        </div>
                        <h3 class="empty-title">No ${currentFilter === 'all' ? '' : currentFilter} applications</h3>
                        <p class="empty-message">Applications will appear here when influencers apply to your campaign.</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = filtered.map((app, index) => `
                <div class="application-card fade-in delay-${Math.min(index + 1, 6)}">
                    <div class="card-header-row">
                        <div class="influencer-info">
                            <div class="influencer-avatar-large" style="background: ${app.gradient}">
                                ${app.avatar}
                            </div>
                            <div class="influencer-details">
                                <div class="influencer-name-row">
                                    <span class="influencer-name">${app.name}</span>
                                    ${app.verified ? `
                                        <svg class="verified-badge" viewBox="0 0 24 24" fill="#3B82F6">
                                            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" stroke="white" stroke-width="2"/>
                                        </svg>
                                    ` : ''}
                                </div>
                                <div class="influencer-stats">
                                    <span>${app.followers}</span>
                                    <span class="stat-separator"></span>
                                    <span>${app.engagementRate} ER</span>
                                    <span class="stat-separator"></span>
                                    <span class="rating-display">
                                        <svg viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                                        </svg>
                                        ${app.rating}
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="status-badge ${app.status}">
                            <span class="status-dot-small"></span>
                            ${app.status === 'pending' ? 'Pending' : 'Rejected'}
                        </div>
                    </div>

                    <div class="niche-tags">
                        ${app.niches.map(niche => `<span class="niche-tag">${niche}</span>`).join('')}
                    </div>

                    <div class="price-section">
                        <div class="price-info">
                            <div class="price-label">Proposed Price</div>
                            <div class="price-value-row">
                                <span class="price-current">${formatPrice(app.price)}</span>
                                ${app.priceUpdated ? `
                                    <div class="price-history">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <polyline points="23 18 13.5 8.5 8.5 13.5 1 6"/>
                                            <polyline points="17 18 23 18 23 12"/>
                                        </svg>
                                        <span class="price-old">${formatPrice(app.originalPrice)}</span>
                                    </div>
                                ` : ''}
                            </div>
                        </div>
                        <div class="platform-icons">
                            ${app.platforms.includes('instagram') ? `
                                <div class="platform-icon instagram">
                                    ${getPlatformIcon('instagram')}
                                </div>
                            ` : ''}
                            ${app.platforms.includes('tiktok') ? `
                                <div class="platform-icon tiktok">
                                    ${getPlatformIcon('tiktok')}
                                </div>
                            ` : ''}
                        </div>
                    </div>

                    <div class="applied-time">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <polyline points="12 6 12 12 16 14"/>
                        </svg>
                        Applied ${getTimeAgo(app.appliedHours)}
                    </div>

                    ${app.status === 'pending' ? `
                        <div class="action-buttons">
                            <button class="action-btn secondary" onclick="window.location.href='pages/proposal-details.html?id=${app.id}'">
                                View Details
                            </button>
                            <button class="action-btn danger" onclick="rejectApplication(${app.id})">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="18" y1="6" x2="6" y2="18"/>
                                    <line x1="6" y1="6" x2="18" y2="18"/>
                                </svg>
                                Reject
                            </button>
                            <button class="action-btn primary" onclick="acceptApplication(${app.id})">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="20 6 9 17 4 12"/>
                                </svg>
                                Accept
                            </button>
                        </div>
                    ` : `
                        <div class="action-buttons">
                            <button class="action-btn secondary" onclick="window.location.href='pages/proposal-details.html?id=${app.id}'">
                                View Details
                            </button>
                        </div>
                    `}
                </div>
            `).join('');
        }

        function filterApplications(filter) {
            currentFilter = filter;

            // Update active chip
            document.querySelectorAll('#applications-tab .filter-chip').forEach(chip => {
                chip.classList.remove('active');
                if (chip.dataset.filter === filter) {
                    chip.classList.add('active');
                }
            });

            // Reload applications
            if (window.campaignData) {
                renderApplications(window.campaignData.applications);
            }
        }

        // Make function global
        window.filterApplications = filterApplications;

        // ==================== ACCEPTED POOL TAB ====================
        function loadPoolTab(data) {
            const pool = data.acceptedPool;
            const campaign = data.campaign;

            // Update progress
            const poolCurrent = pool.length;
            const poolRequired = campaign.requiredInfluencers;
            const poolPercentage = Math.round((poolCurrent / poolRequired) * 100);

            document.getElementById('pool-current-2').textContent = poolCurrent;
            document.getElementById('pool-required-2').textContent = poolRequired;
            document.getElementById('progress-bar-2').style.width = poolPercentage + '%';

            // Update counts
            const counts = {
                all: pool.length,
                awaiting: pool.filter(i => i.status === 'awaiting-signature').length,
                signed: pool.filter(i => i.status === 'contract-signed').length,
                paid: pool.filter(i => i.status === 'paid').length,
                content: pool.filter(i => i.status === 'content-submitted').length,
                done: pool.filter(i => i.status === 'approved').length
            };

            document.getElementById('count-pool-all').textContent = counts.all;
            document.getElementById('count-awaiting').textContent = counts.awaiting;
            document.getElementById('count-signed').textContent = counts.signed;
            document.getElementById('count-paid').textContent = counts.paid;
            document.getElementById('count-content').textContent = counts.content;
            document.getElementById('count-done').textContent = counts.done;

            // Render pool
            renderPool(pool);
        }

        function renderPool(pool) {
            const container = document.getElementById('pool-container');

            // Filter pool
            const filtered = currentPoolFilter === 'all'
                ? pool
                : pool.filter(i => i.status === currentPoolFilter);

            if (filtered.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                                <circle cx="9" cy="7" r="4"/>
                                <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                                <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                            </svg>
                        </div>
                        <h3 class="empty-title">No influencers here</h3>
                        <p class="empty-message">Accepted influencers will appear in this section.</p>
                    </div>
                `;
                return;
            }

            // Group by status
            const groups = {
                'expired': { title: 'Expired - Need Replacement', icon: 'error', count: 0, items: [] },
                'awaiting-signature': { title: 'Awaiting Signature', icon: 'warning', count: 0, items: [] },
                'contract-signed': { title: 'Contract Signed', icon: 'info', count: 0, items: [] },
                'paid': { title: 'Paid - Awaiting Content', icon: 'success', count: 0, items: [] },
                'content-submitted': { title: 'Content Submitted - Review', icon: 'purple', count: 0, items: [] },
                'approved': { title: 'Approved & Completed', icon: 'success', count: 0, items: [] },
                'revision': { title: 'Revision Requested', icon: 'warning', count: 0, items: [] }
            };

            filtered.forEach(influencer => {
                if (groups[influencer.status]) {
                    groups[influencer.status].items.push(influencer);
                    groups[influencer.status].count++;
                }
            });

            // Render groups
            let html = '';
            Object.keys(groups).forEach((status, index) => {
                const group = groups[status];
                if (group.count > 0) {
                    html += renderPoolGroup(group, status, index + 1);
                }
            });

            container.innerHTML = html;
        }

        function renderPoolGroup(group, status, delayIndex) {
            let html = `
                <div class="section-header fade-in delay-${delayIndex}">
                    <div class="section-icon ${group.icon}">
                        ${getSectionIcon(status)}
                    </div>
                    <span class="section-title">${group.title}</span>
                    <span class="section-count">(${group.count})</span>
                </div>
                <div class="influencer-list">
            `;

            group.items.forEach((influencer, index) => {
                html += renderInfluencerCard(influencer, index + 1);
            });

            html += '</div>';
            return html;
        }

        function renderInfluencerCard(inf, delay) {
            const cardClass = inf.status === 'expired' ? 'influencer-card expired' : 'influencer-card';

            return `
                <div class="${cardClass} fade-in delay-${delay}">
                    <div class="card-main">
                        <div class="influencer-avatar" style="background: ${inf.gradient}">
                            ${inf.avatar}
                        </div>
                        <div class="card-content">
                            <div class="card-top-row">
                                <span class="card-influencer-name">${inf.name}</span>
                                <span class="card-price">${formatPrice(inf.price)}</span>
                            </div>
                            <div class="card-middle-row">
                                <span class="card-stats">${inf.followers} ‚Ä¢ ${inf.engagementRate} ER</span>
                                <div class="platform-icons-small">
                                    ${inf.platforms.map(p => `
                                        <span class="platform-dot ${p}">
                                            ${getPlatformIcon(p)}
                                        </span>
                                    `).join('')}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="status-row">
                        ${getStatusBadgeHTML(inf.status)}
                        ${getTimeLeftHTML(inf)}
                    </div>
                    ${getPaymentIndicatorHTML(inf)}
                    ${getPoolActionsHTML(inf)}
                </div>
            `;
        }

        function getSectionIcon(status) {
            const icons = {
                'expired': '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg>',
                'awaiting-signature': '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>',
                'contract-signed': '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>',
                'paid': '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="4" width="22" height="16" rx="2" ry="2"/><line x1="1" y1="10" x2="23" y2="10"/></svg>',
                'content-submitted': '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>',
                'approved': '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>',
                'revision': '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>'
            };
            return icons[status] || '';
        }

        function getStatusBadgeHTML(status) {
            const badges = {
                'awaiting-signature': '<span class="status-badge awaiting-signature"><span class="status-dot-small"></span>Awaiting Signature</span>',
                'expired': '<span class="status-badge expired"><span class="status-dot-small"></span>Didn\'t Sign in Time</span>',
                'contract-signed': '<span class="status-badge contract-signed"><span class="status-dot-small"></span>Contract Signed</span>',
                'paid': '<span class="status-badge paid"><span class="status-dot-small"></span>Paid (In Escrow)</span>',
                'content-submitted': '<span class="status-badge content-submitted"><span class="status-dot-small"></span>Content Submitted</span>',
                'approved': '<span class="status-badge approved"><span class="status-dot-small"></span>Approved</span>',
                'revision': '<span class="status-badge revision"><span class="status-dot-small"></span>Revision Requested</span>'
            };
            return badges[status] || '';
        }

        function getTimeLeftHTML(inf) {
            if (inf.status === 'awaiting-signature' && inf.timeLeftHours) {
                const urgent = inf.timeLeftHours < 24 ? 'urgent' : '';
                return `
                    <span class="time-left ${urgent}">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <polyline points="12 6 12 12 16 14"/>
                        </svg>
                        ${inf.timeLeftHours}h left
                    </span>
                `;
            }
            return '';
        }

        function getPaymentIndicatorHTML(inf) {
            if (inf.status === 'expired') return '';

            const isPaid = inf.paid;
            const iconClass = isPaid ? 'paid' : 'unpaid';
            const textClass = isPaid ? 'paid' : 'unpaid';
            const text = isPaid ? `${formatPrice(inf.price)} in escrow` : 'Not paid yet';
            const icon = isPaid
                ? '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>'
                : '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg>';

            return `
                <div class="payment-indicator">
                    <div class="payment-icon ${iconClass}">
                        ${icon}
                    </div>
                    <span class="payment-text ${textClass}">${text}</span>
                </div>
            `;
        }

        function getPoolActionsHTML(inf) {
            let html = '<div class="card-actions">';

            switch(inf.status) {
                case 'awaiting-signature':
                    html += `
                        <button class="action-btn secondary" onclick="alert('Opening chat...')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                            </svg>
                            Message
                        </button>
                        <button class="action-btn danger" onclick="cancelDeal(${inf.id})">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="18" y1="6" x2="6" y2="18"/>
                                <line x1="6" y1="6" x2="18" y2="18"/>
                            </svg>
                            Cancel
                        </button>
                    `;
                    break;

                case 'expired':
                    html += `
                        <button class="replace-btn" onclick="replaceInfluencer(${inf.id})">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 2v6h-6"/>
                                <path d="M3 12a9 9 0 0 1 15-6.7L21 8"/>
                                <path d="M3 22v-6h6"/>
                                <path d="M21 12a9 9 0 0 1-15 6.7L3 16"/>
                            </svg>
                            Replace with Another Influencer
                        </button>
                    `;
                    break;

                case 'contract-signed':
                    html += `
                        <button class="action-btn secondary">View Contract</button>
                        <button class="action-btn primary" onclick="payInfluencer(${inf.id})">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="1" y="4" width="22" height="16" rx="2" ry="2"/>
                                <line x1="1" y1="10" x2="23" y2="10"/>
                            </svg>
                            Pay Now
                        </button>
                    `;
                    break;

                case 'paid':
                    html += `
                        <button class="action-btn secondary" onclick="alert('Opening chat...')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                            </svg>
                            Message
                        </button>
                        <button class="action-btn secondary" onclick="viewInfluencerDetails(${inf.id})">View Details</button>
                    `;
                    break;

                case 'content-submitted':
                    html += `
                        <button class="action-btn warning" onclick="requestRevision(${inf.id})">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                            </svg>
                            Request Revision
                        </button>
                        <button class="action-btn success" onclick="approveContent(${inf.id})">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="20 6 9 17 4 12"/>
                            </svg>
                            Approve
                        </button>
                    `;
                    break;

                case 'approved':
                    html += `
                        <button class="action-btn secondary" onclick="viewInfluencerDetails(${inf.id})">View Details</button>
                    `;
                    break;

                case 'revision':
                    html += `
                        <button class="action-btn secondary" onclick="alert('Opening chat...')">Message</button>
                        <button class="action-btn secondary" onclick="viewInfluencerDetails(${inf.id})">View Details</button>
                    `;
                    break;
            }

            html += '</div>';
            return html;
        }

        function filterPool(filter) {
            currentPoolFilter = filter;

            // Update active chip
            document.querySelectorAll('#pool-tab .filter-chip').forEach(chip => {
                chip.classList.remove('active');
                if (chip.dataset.filter === filter) {
                    chip.classList.add('active');
                }
            });

            // Reload pool
            if (window.campaignData) {
                renderPool(window.campaignData.acceptedPool);
            }
        }

        // Make function global
        window.filterPool = filterPool;
    </script>

    <!-- Load Campaign Data - MUST BE LAST -->
    <script src="data/data.js"></script>

    <!-- FAB Button -->
    <button class="fab" onclick="alert('Create new campaign coming soon!')" style="position: fixed; bottom: 90px; left: 50%; transform: translateX(-50%); width: 60px; height: 60px; border-radius: 50%; background: linear-gradient(135deg, #6366F1 0%, #8B5CF6 100%); border: none; color: white; cursor: pointer; box-shadow: 0 8px 24px rgba(99,102,241,0.4); display: flex; align-items: center; justify-content: center; transition: all 0.3s; z-index: 100;">
        <svg width="28" height="28" fill="none" stroke="currentColor" stroke-width="3">
            <path d="M14 6v16M6 14h16"/>
        </svg>
    </button>

    <!-- Bottom Tab Bar -->
    <nav style="position: fixed; bottom: 0; left: 50%; transform: translateX(-50%); width: 100%; max-width: 430px; background: white; border-top: 1px solid #E5E7EB; padding: 8px 20px; padding-bottom: calc(8px + env(safe-area-inset-bottom, 0)); display: flex; justify-content: space-around; align-items: center; z-index: 99;">
        <div onclick="window.location.href='my-campaigns.html'" style="display: flex; flex-direction: column; align-items: center; gap: 4px; padding: 8px 12px; border-radius: 12px; cursor: pointer; color: #9CA3AF;">
            <svg style="width: 24px; height: 24px;" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/>
                <path d="M9 22V12h6v10"/>
            </svg>
            <span style="font-size: 10px; font-weight: 600;">Home</span>
        </div>
        <div onclick="alert('Messages coming soon!')" style="display: flex; flex-direction: column; align-items: center; gap: 4px; padding: 8px 12px; border-radius: 12px; cursor: pointer; color: #9CA3AF;">
            <svg style="width: 24px; height: 24px;" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/>
            </svg>
            <span style="font-size: 10px; font-weight: 600;">Messages</span>
        </div>
        <div style="width: 60px;"></div>
        <div onclick="window.location.href='my-campaigns.html'" style="display: flex; flex-direction: column; align-items: center; gap: 4px; padding: 8px 12px; border-radius: 12px; cursor: pointer; position: relative; color: #6366F1;">
            <div style="position: absolute; top: -8px; left: 50%; transform: translateX(-50%); width: 24px; height: 3px; background: #6366F1; border-radius: 0 0 3px 3px;"></div>
            <svg style="width: 24px; height: 24px;" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
            </svg>
            <span style="font-size: 10px; font-weight: 600;">Campaigns</span>
        </div>
        <div onclick="alert('Profile coming soon!')" style="display: flex; flex-direction: column; align-items: center; gap: 4px; padding: 8px 12px; border-radius: 12px; cursor: pointer; color: #9CA3AF;">
            <svg style="width: 24px; height: 24px;" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/>
                <circle cx="12" cy="7" r="4"/>
            </svg>
            <span style="font-size: 10px; font-weight: 600;">Profile</span>
        </div>
    </nav>

    <!-- Version Switcher Script -->
    <script src="js/version-switcher.js"></script>
</body>
</html>
